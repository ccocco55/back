<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.youeatieat.mapper.MainMapper">
    <select id="selectPackDealAll">
        select p1.*, p2.c from tbl_product p1
                                   join
                               (
                                   select product_id, count(*) c from tbl_cart
                                   where created_date >= DATE_ADD(NOW(), INTERVAL -1 WEEK)
                                   group by product_id
                               ) p2
                               on p1.id = p2.product_id
        order by p2.c desc
        limit 8 offset 0;
    </select>

    <select id="selectBestAll">
        select p1.* from tbl_product p1
                             join
                         (
                             select product_id, count(*) c from tbl_like
                             group by product_id
                         ) p2
                         on p1.id = p2.product_id
        order by p2.c desc
        limit 10 offset 0;
    </select>
</mapper>