<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.youeatieat.mapper.ProductInquiryMapper">
    <insert id="insertProductInquiry">
        insert into tbl_product_inquiry (product_inquiry_title, product_inquiry_content, member_id, product_id)
        values (#{productInquiryTitle}, #{productInquiryContent}, #{memberId}, #{productId})
    </insert>

    <select id="selectAllProductInquiry">
        select pi.id, product_inquiry_title, product_inquiry_content, member_id, m.member_name, product_id, pi.product_inquiry_answer_status, pi.created_date
        from tbl_product_inquiry pi join tbl_member m on pi.member_id = m.id
        where product_inquiry_status = 'active'
            and product_id = #{productId}
        ORDER BY created_date DESC
        LIMIT #{criteria.count} OFFSET #{criteria.offset};
    </select>

    <select id="countActiveProductInquiry">
        select count(*)
        from tbl_product_inquiry
        where product_inquiry_status = 'active'
        and product_id = #{productId}
    </select>
</mapper>