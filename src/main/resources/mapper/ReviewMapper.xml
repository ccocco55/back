<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.youeatieat.mapper.ReviewMapper">
    <select id="selectActiveReview">
        select id, member_name, review_content, review_status, member_id, request_id, product_id, subscription_status, created_date, updated_date
        from view_subscription_sub_payment
        where product_id = #{productId}
        LIMIT #{criteria.count} OFFSET #{criteria.offset};
    </select>
    <select id="countActiveReview">
        select count(*)
        from tbl_review
        where review_status = 'active'
        and product_id = #{productId}
    </select>
    <select id="selectReviewById">
        select id, member_name, review_content, review_status, member_id, request_id, product_id, subscription_status, created_date, updated_date
        from view_subscription_sub_payment
        where review_status = 'active' and id = #{id}
    </select>
</mapper>